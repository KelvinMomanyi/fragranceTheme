{% comment %}
    Renders the pickup availability for a product variant.
    Accepts:
    - product: {Object} Product object.
    - variant: {Object} Product variant object.

    Usage:
    {% render 'pickup-availability', product: product, variant: variant %}
{% endcomment %}

{%- assign pick_up_availabilities = variant.store_availabilities | where: 'pick_up_enabled', true -%}

<pickup-availability
  class="product__pickup-availability"
  {% if variant.available and pick_up_availabilities.size > 0 %} available{% endif %}
  data-root-url="{{ routes.root_url }}"
  data-variant-id="{{ variant.id }}"
  data-product-page-color-scheme="color-{{ section.settings.color_scheme }}"
>
  <template>
    <pickup-availability-preview class="pickup-availability-preview">
        <img src="{{ 'icon-unavailable.svg' | asset_url }}" aria-hidden="true" width="20" height="20" alt="">
        <div class="pickup-availability-info">
            <p class="caption-large">{{ 'products.product.pickup_availability.unavailable' | t }}</p>
            <button class="pickup-availability-button link link--text underlined-link">{{ 'products.product.pickup_availability.refresh' | t }}</button>
        </div>
    </pickup-availability-preview>
  </template>
</pickup-availability>

<script src="{{ 'pickup-availability.js' | asset_url }}" defer="defer"></script>
