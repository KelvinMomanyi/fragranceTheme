<!-- 
    - #HEADER
  -->

  <header class="header color-scheme-{{ section.settings.color_scheme }}" style="{% render 'color-scheme-styles', scheme: section.settings.color_scheme %}" data-header>
    <div class="container">

      
      <div class="">
        <button class="header-action-btn" aria-label="Open menu" data-nav-toggler>
          {% render 'icon-fragrance', icon: 'menu' %}
        </button> 
      </div>
      
      <div>
      <a href="/" class="logo"  >
        {% assign default_width = 69 %}
        {% assign default_height = 26 %}
        {% assign scaled_width = default_width | times: section.settings.logo_scale %}
        {% assign scaled_height = default_height | times: section.settings.logo_scale %}
          {% if section.settings.logo_image != blank %}
            <img 
              src="{{ section.settings.logo_image | image_url  }}"  
              alt="{{ shop.name }}"
              width="{{ scaled_width }}" 
              height="{{ scaled_height }}" 
              loading="eager"
            />
           {% else %}
            <a href="/" class="logo">Fragrance</a>
          {% endif %} 
        </a>
      </div>
      
     
    
      {% comment %} <div class="input-wrapper">
        <input type="search" name="search" placeholder="Search Anything..." class="input-field">

        {% render 'icon-fragrance', icon: 'search' %}
      </div> {% endcomment %}
      <div class="header-action"  id="headerActions">
        <a href="#" class="header-action-btn" aria-label="Search" id="search-icon">
          {% render 'icon-fragrance', icon: 'search' %}
        </a> 
       

        <button class="header-action-btn" aria-label="Cart" onclick="openCart()">
          {% render 'icon-fragrance', icon: 'bag-handle' %}
          <span class="btn-badge">0</span>
        </button>

      </div>

    </div>

    <!-- SEARCH BAR TOP -->
  
      <div id="search-bar" class="search-bar">
        <script src="{{ 'search-form.js' | asset_url }}" defer="defer"></script>
        <script src="{{ 'predictive-search.js' | asset_url }}" defer="defer"></script>
        {{ 'component-predictive-search.css' | asset_url | stylesheet_tag }}
        
        <div class="container">
          <predictive-search search-open data-loading-text="{{ 'accessibility.loading' | t }}">
            <form action="{{ routes.search_url }}" method="get" role="search" class="search">
              <div class="field">
                <input
                  class="search__input field__input"
                  id="Search-In-Modal"
                  type="search"
                  name="q"
                  value="{{ search.terms | escape }}"
                  placeholder="Search for products..."
                  role="combobox"
                  aria-expanded="false"
                  aria-owns="predictive-search-results"
                  aria-controls="predictive-search-results"
                  aria-haspopup="listbox"
                  aria-autocomplete="list"
                  autocorrect="off"
                  autocomplete="off"
                  autocapitalize="off"
                  spellcheck="false"
                  style="width: 100%; padding: 10px; border: none; border-bottom: 1px solid #ccc;"
                >
                <input name="options[prefix]" type="hidden" value="last">
                <button type="reset" class="reset__button field__button{% if search.terms == blank %} hidden{% endif %}" aria-label="{{ 'general.search.reset' | t }}">
                  <svg class="icon icon-close" aria-hidden="true" focusable="false">
                    <use href="#icon-close">
                  </svg>
                </button>
              </div>
              
              <div class="predictive-search predictive-search--header" tabindex="-1" data-predictive-search>
                <div class="predictive-search__loading-state">
                  {% render 'loading-spinner', class: 'predictive-search__loading-state' %}
                </div>
              </div>

              <span class="predictive-search-status visually-hidden" role="status" aria-hidden="true"></span>
              <span class="hidden" data-predictive-search-live-region-count-value>
                {%- if search.results_count == 0 -%}
                  {{ 'templates.search.no_results' | t: terms: search.terms }}
                {%- endif -%}
              </span>
            </form>
          </predictive-search>
        </div>
     </div>
  </header>





  <!-- 
    - #SIDEBAR
  -->

  <div class="sidebar" data-navbar>
    <div class="navClose">
       <button class="nav-close-btn" aria-label="close menu" data-nav-toggler>
        {% render 'icon-fragrance', icon: 'close' %}
      </button>
    </div>
    <nav class="navbar">
      <ul class="navbar-list">
        {% assign nav_links = linklists.main-menu.links %} <!-- Replace 'main-menu' with your menu handle -->
        {% for link in nav_links %}
          <li class="navbar-item {% if link.links != blank %}has-dropdown{% endif %}">
            <a href="{{ link.url }}" class="navbar-link" data-nav-link>
              {{ link.title }}
              {% if link.links != blank %}
                {% render 'icon-fragrance', icon: 'chevron-down', size: 'small' %}
              {% endif %}
            </a>
            {% if link.links != blank %}
              <ul class="dropdown-list">
                {% for child_link in link.links %}
                  <li class="dropdown-item">
                    <a href="{{ child_link.url }}" class="dropdown-link">{{ child_link.title }}</a>
                  </li>
                {% endfor %}
              </ul>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </nav>

      


    

    <ul class="contact-list">

      <li>
        <p class="contact-list-title">Contact Us</p>
      </li>

      <li class="contact-item">
        <address class="address">
          123 Example Ave, Suite 456, Metropolis, Country
        </address>
      </li>

      <li class="contact-item">
        <a href="mailto:info@example.com" class="contact-link">info@example.com</a>
      </li>

      <li class="contact-item">
        <a href="tel:00001235567890" class="contact-link">(0000) 1235 567890</a>
      </li>

    </ul>

    

    <div class="social-wrapper">

      <p class="social-list-title">Follow US On Socials</p>

      <ul class="social-list">

        <li>
          <a href="#" class="social-link" aria-label="Facebook">
            {% render 'icon-fragrance', icon: 'facebook' %}
          </a>
        </li>

        <li>
          <a href="#" class="social-link" aria-label="Instagram">
            {% render 'icon-fragrance', icon: 'instagram' %}
          </a>
        </li>

        <li>
          <a href="#" class="social-link" aria-label="Tumblr">
            {% render 'icon-fragrance', icon: 'tumblr' %}
          </a>
        </li>

      </ul>

    </div>


    <!-- Language and Currency Selectors Container -->
    <div id="currency-language-container ">
      <select name="locale_code" class="locale-selector" style="color:{{ section.settings.text_color }};" aria-label="Language">
        {% for language in localization.available_languages %}
          {% if language.iso_code == localization.language.iso_code %}
            <option value="{{ language.iso_code }}" selected="selected">{{ language.name }}</option>
          {% else %}
            <option value="{{ language.iso_code }}">{{ language.name }}</option>
          {% endif %}
        {% endfor %}
      </select>
      
    
    
      {% form 'localization', id: 'localization_form', class: 'localization-form' %}
          <div class="localization-wrapper" style="display: flex; gap: 10px;">
            <input type="hidden" name="country_code" value="{{ localization.country.iso_code }}">
            <input type="hidden" name="locale_code" value="{{ localization.language.iso_code }}">
            
            <select name="country_code" class="localization-selector" aria-label="Country">
              {% for country in localization.available_countries %}
                <option value="{{ country.iso_code }}" {% if country.iso_code == localization.country.iso_code %}selected{% endif %}>
                  {{ country.name }} ({{ country.currency.iso_code }} {{ country.currency.symbol }})
                </option>
              {% endfor %}
            </select>
          </div>
      {% endform %}
        </div>
       {% comment %} {% render 'icon-fragrance', icon: 'close' %} {% endcomment %}
    </div>


    <div class="header-action" style="display:flex; justify-content:flex-start; padding-top:10px;">
     <a href="/account" class="header-action-btn" aria-label="User account">
        {% render 'icon-fragrance', icon: 'person' %}
      </a>

      <a href="/wishlist" class="header-action-btn" aria-label="Favorites">
        {% render 'icon-fragrance', icon: 'heart' %}
        <span class="btn-badge">0</span>
      </a>
    </div>

  </div>

<div class="overlay" data-overlay data-nav-toggler></div>


<!--
  ADD CART SIDEBAR
-->
  {% render 'cart-detail' %}


  <script>
  (function() {
    'use strict';

    /* Consolidated search handler - debounced */
    /* Predictive search is now handled by predictive-search.js */

    /* UI Toggles (Header & Sidebar) */
    document.addEventListener('click', function(event) {
      var target = event.target;
      
      // Search Toggle
      var searchIcon = document.getElementById('search-icon');
      var searchBar = document.getElementById('search-bar');
      
      if (searchIcon && searchIcon.contains(target)) {
        event.preventDefault();
        searchBar.classList.toggle('active');
        return;
      } else if (searchBar && !searchBar.contains(target)) {
        searchBar.classList.remove('active');
      }

      // Sidebar Toggle (Nav Toggler)
      var navToggler = target.closest('[data-nav-toggler]');
      if (navToggler) {
        var navbar = document.querySelector('[data-navbar]');
        var overlay = document.querySelector('[data-overlay]');
        if (navbar) navbar.classList.toggle('active');
        if (overlay) overlay.classList.toggle('active');
        return;
      }

      // Close Sidebar on link click or overlay click
      if (target.closest('[data-nav-link]') || target.closest('[data-overlay]')) {
        var navbar = document.querySelector('[data-navbar]');
        var overlay = document.querySelector('[data-overlay]');
        if (navbar) navbar.classList.remove('active');
        if (overlay) overlay.classList.remove('active');
      }
    });

    window.addEventListener('scroll', function() {
      var searchBar = document.getElementById('search-bar');
      if (searchBar) searchBar.classList.remove('active');
    }, { passive: true });

    /* Cart State */
    window.updateCartCount = function() {
      fetch('/cart.js')
        .then(response => response.json())
        .then(cart => {
          document.querySelectorAll('.btn-badge').forEach(el => el.textContent = cart.item_count);
        })
        .catch(error => console.error('Error fetching cart data:', error));
    };

    document.addEventListener('DOMContentLoaded', updateCartCount);
    document.addEventListener('cart:updated', updateCartCount);

    /* Cart Modal Actions */
    window.openCart = function() {
      var modal = document.getElementById('myModal2');
      if (modal) {
        modal.style.display = 'flex';
        if (typeof fetchCart === 'function') fetchCart();
      }
    };

    /* Localization Management */
    document.querySelectorAll('.localization-form select').forEach(function(element) {
        element.addEventListener('change', function(e) { e.target.form.submit(); });
    }); 

  })();
  </script> 
     
  
  <style>
       /* Search bar styling */
.search-bar {
  display: none;
  position: absolute;
  top: 10%; 
  left: 0;
  width: 100%;
  background-color: #fff;
  padding: 10px 20px;
  z-index: 1000;
  transform: translateY(100%);
    transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
    opacity: 0;
    visibility: hidden;
}

.search-bar.active {
    display: block;
    opacity: 1;
    visibility: visible;
}

.search-bar input {
  outline: none; /* Removes the default focus outline */
  border: none; /* Removes any border if it appears */
}

#search-input {
  width: 100%;
  padding: 10px;
  border-bottom: 1px solid #ccc;

}


#search-input::placeholder{
  font-size:14px;
}






#search-container {
    position: relative;
}

#search-results {
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    background-color: white;
    border: 1px solid #ddd;
    z-index: 1000;
    max-height: 300px;
    overflow-y: auto;
}

.search-result-item {
    padding: 10px;
    border-bottom: 1px solid #ddd;
    display: flex;
    align-items: center;
}

.search-result-item img {
    max-width: 50px;
    margin-right: 10px;
}

.search-result-item p {
    margin: 0;
}




#currency-language-container {
  display: none;
  gap: 10px; /* Space between selectors */
  align-items: center;
  {% comment %} margin-bottom: 10px; /* Space below the container */ {% endcomment %}
}

#lang-selector, #curren-selector {
    padding: 0; /* Add padding for a better look */
    border: 1px solid #ddd; /* Optional: Add a border */
    border-radius: 4px; /* Optional: Rounded corners */
    font-size: 14px; /* Adjust the font size */
  }
   .currency-selector {
    background-color: transparent; /* No background color */
    color: {{section.settings.text_color}}; /* White text */
    border: none; /* Remove the default border */
    {% comment %} border-bottom: 1px solid white; /* Add a white underline */ {% endcomment %}
    padding-left: 15px; /* Adjust padding as needed */
    font-size: 12px; /* Adjust font size as needed */
    appearance: none; /* Remove the default browser appearance */
    -webkit-appearance: none; /* Remove appearance for Safari */
    -moz-appearance: none; /* Remove appearance for Firefox */
    cursor: pointer;
    position: relative; /* Required for positioning the arrow */
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path fill="white" d="M5 7L2 3h6z"/></svg>'); /* Custom dropdown arrow */
    background-repeat: no-repeat;
    background-position: left 2px center; /* Position the arrow */
    background-size: 12px 12px; /* Size of the arrow */
  
  }
  
  .currency-selector:focus {
    outline: none; /* Remove the default focus outline */
    {% comment %} border-bottom: 1px solid #ccc; /* Optional: Change underline color on focus */ {% endcomment %}
  }
  
  /* Optional: Add custom styles for options */
  .currency-selector option {
    color: rgb(255, 255, 255); /* Change option text color if needed */
    background-color: rgb(0, 0, 0); /* Change option background if needed */
  }



  .language-selector {
    background-color: transparent; /* No background color */
    color: {{section.settings.text_color}}; /* White text */
    border: none; /* Remove the default border */
    {% comment %} border-bottom: 1px solid white; /* Add a white underline */ {% endcomment %}
    padding: 0; /* Adjust padding as needed */
    font-size: 12px; /* Adjust font size as needed */
    appearance: none; /* Remove the default browser appearance */
    -webkit-appearance: none; /* Remove appearance for Safari */
    -moz-appearance: none; /* Remove appearance for Firefox */
  }
  
  .language-selector:focus {
    outline: none; /* Remove the default focus outline */
    {% comment %} border-bottom: 1px solid #ccc; /* Optional: Change underline color on focus */ {% endcomment %}
  }
  
  /* Optional: Add custom styles for options */
  .language-selector option {
    color: black; /* Change option text color if needed */
    background-color: white; /* Change option background if needed */
  }
  
  .locale-selector {
    background-color: transparent; /* No background color */
    color:{{section.settings.text_color}};
    /*color: white;*/ /* White text */
    border: none; /* Remove the default border */
    {% comment %} border-bottom: 1px solid white; /* Add a white underline */ {% endcomment %}
    padding: 0; /* Adjust padding as needed */
    font-size: 12px; /* Adjust font size as needed */
    font-family:var(--ff-roboto);
    appearance: none; /* Remove the default browser appearance */
    -webkit-appearance: none; /* Remove appearance for Safari */
    
    .localization-selector {
        background: transparent;
        border: 1px solid rgba(255,255,255,0.2);
        color: {{ section.settings.text_color }};
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
    }
    
    .localization-selector option {
        color: #000;
        background: #fff;
    }

    .dropdown-list {
      display: none;
      padding-left: 15px;
      list-style: none;
      margin-top: 5px;
    }
    
    .navbar-item.has-dropdown:hover .dropdown-list,
    .navbar-item.has-dropdown:focus-within .dropdown-list {
      display: block;
    }

    .dropdown-link {
        font-size: 0.9em;
        color: inherit;
        text-decoration: none;
        padding: 5px 0;
        display: block;
        opacity: 0.8;
    }
    .dropdown-link:hover {
        opacity: 1;
        text-decoration: underline;
    }
    -moz-appearance: none; /* Remove appearance for Firefox */
    position: relative; /* Required for positioning the arrow */
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path fill="white" d="M5 7L2 3h6z"/></svg>'); /* Custom dropdown arrow */
    background-repeat: no-repeat;
    background-position: right 10px center; /* Position the arrow */
    background-size: 12px 12px; /* Size of the arrow */
    padding-right: 25px; /* Add space for the arrow */
  }
  
  .locale-selector:focus {
    outline: none; /* Remove the default focus outline */
    {% comment %} border-bottom: 1px solid #ccc; /* Optional: Change underline color on focus */ {% endcomment %}
  }
  
  .locale-selector option {
    color: black; /* Change option text color if needed */
    background-color: white; /* Change option background if needed */
  }
  

   
  .currency-selector {
    position: relative;
    display: inline-block;
    cursor: pointer;
  }
  
  .dropdown-toggle {
    padding: 8px;
    border: 1px solid #ccc;
    background-color: rgb(255, 255, 255);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .dropdown-menu {
    display: none; /* Hidden by default */
    position: absolute;
    top: 100%;
    left: 0;
    background-color: rgb(255, 255, 255);
    {% comment %} border: 1px solid #ccc; {% endcomment %}
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    z-index: 1000;
  }
  
  .currency-selector:hover .dropdown-menu {
    display: block; /* Show menu on hover */
  }
  
  .dropdown-item {
    padding: 8px 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .dropdown-item:hover {
    background-color: #f0f0f0;
  }


  .flag-icon {
    width: 16px;  /* Same width as the original image */
    height: 12px; /* Same height as the original image */
    display: inline-block; /* Allows it to be treated like text/image */
    background-size: cover; /* Ensures the image covers the entire div */
    background-position: center; /* Centers the image within the div */
    background-repeat: no-repeat; /* Prevents the image from repeating */
    vertical-align: middle; /* Aligns with text if placed next to text */
  }

  .dropdown{
    position: relative;
    z-index:999;
  }


.select{

  padding: 0; /* Adjust padding as needed */
  font-size: 12px; /* Adjust font size as needed */
  appearance: none; /* Remove the default browser appearance */
  -webkit-appearance: none; /* Remove appearance for Safari */
  -moz-appearance: none; /* Remove appearance for Firefox */
  position: relative; 
    display: flex;
    align-items: center;
    gap:5px;
    cursor: pointer;
    /*transition: background 0.3s;*/
}
.selected{
  display:flex;
  align-items:center;
  gap:5px;
  border: none;
}


.newmenu{
    list-style-type: none;
    padding: 0.1em 0.2em;
    background:rgb(255, 255, 255);
    color:#9fa5b5;
    position:fixed; 
    top: 3em;
    right: 0;
    width:8%;
    transform: translateX(-50%);
    opacity: 0;
    display: none;
    transition: 0.2s;
    z-index: 9999999;
}

.newmenu li {
    padding: 0.7em 0.5em;
    /*margin: 0.3em 0;*/
    border-radius: 0.5em;
    cursor: pointer;
    display:flex;
    gap:3px;
    align-items:center;
}

.newmenu li:hover{
    background: #2a2d35;
}

.active{
    background:hsl(231, 63.60%, 97.80%) 247, 253);
}


.menu-open{
    display: block;
    opacity: 1;
    z-index:999
}

.separator {
  height: 16px; /* Adjust the height as needed */
  border-left: 1px solid rgb(0, 0, 0); /* Adjust the border thickness and color */
}

.custom-select {
            position: relative;
            display: inline-block;
            width: auto;
        }

        .custom-select select {
            appearance: none; /* Hide default arrow */
            -webkit-appearance: none;
            -moz-appearance: none;
            width: 100%;
            padding: 10px;
            background-color: transparent;
        }

        .custom-select::after {
            content: "â–¼"; /* Custom dropdown arrow */
            position: absolute;
            right: 10px; /* Default position */
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: #555;
        }


  @media screen and (max-width: 875px){
    #currency-language-container  {
      display: block;
    }
  }






  </style>

{% schema %}
{
  "name": "header",
  "settings": [
    {
      "type": "color_scheme","id": "color_scheme","label": "Color scheme","default": "scheme-1"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background",
      "default": "#FFFFFF"
     },
     {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
     },
     {
      "type": "image_picker",
      "id": "logo_image",
      "label": "Logo Image"
    },
    {
      "type": "range",
      "id": "logo_scale",
      "label": "Logo Scale",
      "min": 0.5,
      "max": 2,
      "step": 0.1,
      "default": 1
    },
    {
      "type":"header",
      "content":"Navigation"  
    },
    {
      "type": "link_list",
      "id": "main_menu_linklist",
      "label": "Main menu",
      "default": "main-menu"
    },
    {
      "type": "link_list",
      "id": "mobile_menu_linklist",
      "label": "Mobile menu",
      "info":"Select a different menu for mobile sidebar",
      "default": "main-menu"
    }
  ],
  "blocks": [],
  "presets": [
    {
      "name": "header"
    }
  ]
}
{% endschema %}