/* Facets (collection filters + sorting)
   This theme uses Dawn-like facets markup (details/summary).
   Keep styles scoped so they don't leak into other pages.
*/

#main-collection-filters {
  --facets-border: rgb(var(--color-foreground-rgb, 0, 0, 0) / 0.16);
  --facets-border-strong: rgb(var(--color-foreground-rgb, 0, 0, 0) / 0.22);
  --facets-surface: rgb(var(--color-foreground-rgb, 0, 0, 0) / 0.03);
  --facets-surface-hover: rgb(var(--color-foreground-rgb, 0, 0, 0) / 0.06);
  --facets-shadow: 0 18px 45px rgb(0 0 0 / 0.14);
  --facets-radius: 14px;
  --facets-pill-radius: 999px;
  --facets-panel-min: 320px;
  --facets-panel-max: 460px;
  --facets-gap: 12px;
  font-family: var(--ff-roboto, system-ui, -apple-system, Segoe UI, Roboto, sans-serif);
}

#main-collection-filters .facets-block-wrapper {
  margin-bottom: 18px;
}

#main-collection-filters summary.facets__summary {
  list-style: none;
}

#main-collection-filters summary.facets__summary::-webkit-details-marker {
  display: none;
}

#main-collection-filters .facets__filters-wrapper {
  gap: var(--facets-gap);
}

@media screen and (min-width: 750px) {
  /* Desktop horizontal filters: clean pills + real dropdown panels */
  #main-collection-filters .facets--horizontal .facets__item {
    border-bottom: 0;
    position: relative;
  }

  #main-collection-filters .facets--horizontal details.facets__panel {
    padding: 0;
    position: relative;
  }

  #main-collection-filters .facets--horizontal summary.facets__summary {
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    min-height: 44px;
    border-radius: var(--facets-pill-radius);
    border: 1px solid var(--facets-border);
    background: var(--facets-surface);
    transition: background-color 160ms ease, border-color 160ms ease, box-shadow 160ms ease;
    user-select: none;
  }

  #main-collection-filters .facets--horizontal summary.facets__summary:hover {
    background: var(--facets-surface-hover);
    border-color: var(--facets-border-strong);
  }

  #main-collection-filters .facets--horizontal details[open] > summary.facets__summary {
    background: var(--color-background);
    border-color: var(--facets-border-strong);
    box-shadow: 0 0 0 3px rgb(var(--color-foreground-rgb, 0, 0, 0) / 0.12);
  }

  #main-collection-filters .facets--horizontal summary.facets__summary:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgb(var(--color-foreground-rgb, 0, 0, 0) / 0.18);
  }

  #main-collection-filters .facets--horizontal .facets__label {
    font-size: 0.95rem;
    letter-spacing: 0.02em;
    text-transform: uppercase;
    color: var(--color-foreground, var(--color-text));
  }

  #main-collection-filters .facets--horizontal .facets__status,
  #main-collection-filters .facets--horizontal .facets__status-wrapper {
    color: rgb(var(--color-foreground-rgb, 0, 0, 0) / 0.82);
  }

  #main-collection-filters .facets--horizontal .facets__panel-content {
    position: absolute;
    top: calc(100% + 10px);
    left: 0;
    width: max-content;
    min-width: min(var(--facets-panel-min), 92vw);
    max-width: min(var(--facets-panel-max), 92vw);
    max-height: min(420px, 70vh);
    overflow: auto;
    padding: 14px;
    border-radius: var(--facets-radius);
    border: 1px solid var(--facets-border);
    background: var(--color-background);
    box-shadow: var(--facets-shadow);
    z-index: 120;
  }

  /* Price panel needs a bit more room */
  #main-collection-filters .facets--horizontal [data-testid="price-filter"] + .facets__panel-content {
    min-width: min(360px, 92vw);
  }

  #main-collection-filters .facets--horizontal .facets__clear,
  #main-collection-filters .facets--horizontal .show-more__button {
    padding-top: 10px;
  }
}

/* Dropdown list row styling (availability, etc.) */
#main-collection-filters .facets__inputs-list {
  gap: 6px;
}

#main-collection-filters label.facet-checkbox {
  padding: 10px;
  border-radius: 10px;
  transition: background-color 140ms ease;
}

#main-collection-filters label.facet-checkbox:hover {
  background: rgb(var(--color-foreground-rgb, 0, 0, 0) / 0.06);
}

#main-collection-filters label.facet-checkbox svg {
  color: rgb(var(--color-foreground-rgb, 0, 0, 0) / 0.45);
}

#main-collection-filters label.facet-checkbox .svg-wrapper {
  width: 16px;
  height: 16px;
  margin-left: -22px;
  color: rgb(var(--color-foreground-rgb, 0, 0, 0) / 0.9);
}

#main-collection-filters label.facet-checkbox input:checked + svg {
  color: rgb(var(--color-foreground-rgb, 0, 0, 0) / 0.9);
}

/* Price inputs: align with theme fields */
#main-collection-filters .price-facet__input {
  background: var(--color-background);
}

/* Sorting dropdown: ensure it sits above grid + matches border/shadow */
#main-collection-filters .sorting-filter__options {
  border-color: var(--facets-border);
  box-shadow: var(--facets-shadow);
}

/* Mobile drawer polish (keeps everything contained) */
@media screen and (max-width: 749px) {
  #main-collection-filters .facets-toggle {
    border: 1px solid var(--facets-border);
    border-radius: var(--facets-radius);
    background: var(--facets-surface);
  }

  #main-collection-filters .facets-toggle__button {
    background: transparent;
    border-color: transparent;
  }
}
